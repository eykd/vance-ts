{{/*
  List page layout - renders section and taxonomy listing pages.
  Displays content as a paginated card grid with featured images.
*/}}
{{ define "main" }}
<section class="py-16">
  <div class="container mx-auto px-4">
    {{ with .Title }}
      <h1 class="mb-8 text-center text-4xl md:text-5xl font-bold">{{ . }}</h1>
    {{ end }}
    {{ with .Description }}
      <p class="mx-auto mb-12 text-center text-lg text-base-content/70 max-w-2xl text-balance">{{ . }}</p>
    {{ end }}

    {{ $pages := .RegularPages }}
    {{ if .IsHome }}
      {{ $pages = where site.RegularPages "Section" "!=" "" }}
    {{ end }}

    {{ $paginator := .Paginate $pages 9 }}

    {{ if $paginator.Pages }}
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      {{ range $paginator.Pages }}
        <div class="card bg-base-100 shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-300">
          {{ with .Params.featured_image }}
            {{ with resources.Get . }}
            <figure class="aspect-video overflow-hidden">
              <a href="{{ $.Permalink }}">
                <img
                  src="{{ .Permalink }}"
                  alt="{{ $.Title }}"
                  class="object-cover w-full h-full hover:scale-105 transition-transform duration-300"
                />
              </a>
            </figure>
            {{ end }}
          {{ end }}
          <div class="card-body">
            <h2 class="card-title">
              <a class="link link-hover" href="{{ .Permalink }}">{{ .Title }}</a>
            </h2>
            {{ with .Description }}
              <p class="text-base-content/70 line-clamp-2">{{ . }}</p>
            {{ end }}
            {{ with .PublishDate }}
              <p class="text-sm text-base-content/50">{{ .Format "January 2, 2006" }}</p>
            {{ end }}
            <div class="card-actions justify-end mt-4">
              <a href="{{ .Permalink }}" class="btn btn-primary btn-sm">
                Read More
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
              </a>
            </div>
          </div>
        </div>
      {{ end }}
    </div>

    <!-- Pagination -->
    <div class="flex justify-center mt-12">
      {{ partial "shared/pagination.html" . }}
    </div>
    {{ else }}
    <div class="text-center py-16">
      <p class="text-lg text-base-content/70">No content found.</p>
    </div>
    {{ end }}
  </div>
</section>
{{ end }}
