{{- $title := .Title -}}
{{- $description := .Description | default .Site.Params.description -}}
{{- $url := .Permalink -}}
{{- $type := cond .IsHome "website" "article" -}}

{{- $image := "" -}}
{{- with .Params.images -}}
  {{- $image = index . 0 -}}
{{- else -}}
  {{- with .Site.Params.images -}}
    {{- $image = index . 0 -}}
  {{- end -}}
{{- end -}}

<meta property="og:title" content="{{ $title }}" />
<meta property="og:description" content="{{ $description }}" />
<meta property="og:url" content="{{ $url }}" />
<meta property="og:type" content="{{ $type }}" />
<meta property="og:site_name" content="{{ .Site.Title }}" />

{{- with $image }}
  {{- $imageURL := . -}}
  {{- if not (strings.HasPrefix . "http") -}}
    {{- with resources.Get . -}}
      {{- $imageURL = .Permalink -}}
    {{- end -}}
  {{- end -}}
  <meta property="og:image" content="{{ $imageURL }}" />
{{- end }}

{{- if not .IsHome }}
  {{- with .PublishDate }}
    <meta property="article:published_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}" />
  {{- end }}
  {{- with .Lastmod }}
    <meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}" />
  {{- end }}
{{- end }}
