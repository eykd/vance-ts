{{/*
  Twitter Card meta tags - enables rich previews in Twitter/X posts.
  Uses summary_large_image when an image is available, summary otherwise.
*/}}
{{- $title := .Title -}}
{{- $description := .Description | default .Site.Params.description -}}

{{- $image := "" -}}
{{- with .Params.images -}}
  {{- $image = index . 0 -}}
{{- else -}}
  {{- with .Site.Params.images -}}
    {{- $image = index . 0 -}}
  {{- end -}}
{{- end -}}

<meta name="twitter:card" content="{{ if $image }}summary_large_image{{ else }}summary{{ end }}" />

{{- with .Site.Params.social.twitter }}
  <meta name="twitter:site" content="@{{ . }}" />
{{- end }}

{{- /* twitter:creator - author's handle, distinct from site handle */ -}}
{{- with .Params.author_twitter | default .Site.Params.author.twitter }}
  <meta name="twitter:creator" content="@{{ . }}" />
{{- end }}

<meta name="twitter:title" content="{{ $title }}" />
<meta name="twitter:description" content="{{ $description }}" />

{{- with $image }}
  {{- $imageURL := . -}}
  {{- if not (strings.HasPrefix . "http") -}}
    {{- with resources.Get . -}}
      {{- $imageURL = .Permalink -}}
    {{- end -}}
  {{- end -}}
  <meta name="twitter:image" content="{{ $imageURL }}" />
  {{- with $.Params.imageAlt | default $.Site.Params.imageAlt | default $title }}
    <meta name="twitter:image:alt" content="{{ . }}" />
  {{- end }}
{{- end }}
